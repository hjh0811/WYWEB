<?xml version="1.0" encoding="utf-8"?>
<framework:BaseWidget xmlns:fx="http://ns.adobe.com/mxml/2009" 
		   xmlns:s="library://ns.adobe.com/flex/spark" xmlns:framework="cn.framework.*" fontFamily="SimSun" 
		   xmlns:mx="library://ns.adobe.com/flex/mx" layout="absolute" width="100%" creationComplete="init()"  fontSize="12"  height="100%" xmlns:esri="http://www.esri.com/2008/ags" xmlns:components="cn.framework.components.*">

	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace framework "cn.framework.*";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@namespace esri "http://www.esri.com/2008/ags";
		@namespace components "cn.framework.components.*";
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import cn.framework.FrameContainer;
			import cn.framework.windows.JDInfo;
			import cn.framework.windows.JDZSInfo;
			import cn.framework.windows.TCInfo;
			
			import com.esri.ags.Graphic;
			import com.esri.ags.Map;
			import com.esri.ags.events.TimeExtentEvent;
			import com.esri.ags.geometry.MapPoint;
			import com.esri.ags.geometry.Polyline;
			import com.esri.ags.layers.GraphicsLayer;
			import com.esri.ags.symbols.LineSymbol;
			import com.esri.ags.symbols.PictureMarkerSymbol;
			import com.esri.ags.symbols.SimpleLineSymbol;
			import com.esri.ags.utils.JSONUtil;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.core.UIComponent;
			import mx.effects.Move;
			import mx.formatters.DateFormatter;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.http.HTTPService;
			
			import spark.effects.Animate;
			import spark.events.IndexChangeEvent;
			import spark.events.TextOperationEvent;
			private var serviceURL:String;
			
			private var jdGraphicslayer:GraphicsLayer = new GraphicsLayer;
			private var pathGraphicslayer:GraphicsLayer = new GraphicsLayer;
			private var graphicsLayerHistory:GraphicsLayer = new GraphicsLayer;
			
			[Bindable]
			private var rfzsNUM:String;
			[Bindable]
			private var rfDataSource:ArrayCollection;
			
			private function init():void
			{
				serviceURL = FrameContainer.getInstance().serviceManager.serviceURL;
				this.map.addLayer(pathGraphicslayer);
				this.map.addLayer(jdGraphicslayer);
				this.map.addLayer(graphicsLayerHistory);
			}
			

		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
		<s:Animate id="fader" 
				   duration="500" 
				   repeatBehavior="loop" 
				   repeatCount="5" 
				   > 
			<s:SimpleMotionPath property="alpha" 
								valueFrom="1.0" valueTo="0.0" /> 
		</s:Animate> 
	</fx:Declarations>
	<s:VGroup width="100%" height="100%" gap="0">
		<mx:VBox verticalScrollPolicy="off" width="100%" height="100%" horizontalGap="5" paddingTop="5" paddingLeft="5" paddingRight="5" verticalGap="8" verticalAlign="top" horizontalAlign="left">
			<mx:HBox verticalAlign="middle"  width="100%"  paddingLeft="10" paddingRight="10" paddingTop="15">
				<mx:Label text="图  层:" width="60"/><mx:ComboBox id="layerComb" labelField="@label" width="100%" height="25"/>
			</mx:HBox>
			<mx:HBox verticalAlign="middle"  width="100%"  paddingLeft="10" paddingRight="10">
				<mx:Label text="字  段:" width="60"/><mx:ComboBox id="layerFieldComb" labelField="@label" width="100%" height="25"/>
			</mx:HBox>
			<mx:HBox width="100%"  verticalAlign="middle" paddingLeft="10" paddingRight="10">
				<mx:Label text="关键字:" width="60"/><mx:TextInput id="keyWord" width="100%" paddingBottom="5" paddingRight="5" />
			</mx:HBox>
			
			<mx:HBox width="100%" horizontalAlign="right" paddingRight="10" verticalAlign="middle">
				<mx:Image source="assets/buttons/query.png" buttonMode="true" useHandCursor="true" />
			</mx:HBox>
			
			<mx:HRule width="100%"/>
			<mx:VBox width="100%" height="100%" verticalGap="1">
				<mx:HBox verticalAlign="middle" verticalGap="8" paddingLeft="5" paddingTop="3">
					<mx:Image source="assets/buttons/comment.png" width="25" height="25"/>
					<mx:Text text="查询结果" fontSize="12"/><mx:Text text="{this.rfzsNUM}"/>
				</mx:HBox>
				<mx:Canvas width="100%" height="100%" horizontalScrollPolicy="off">
					<mx:VBox  verticalGap="3" width="100%" height="100%" paddingLeft="5" paddingTop="3" paddingBottom="3" horizontalScrollPolicy="off">
						<mx:Repeater id="renfangRepeater" dataProvider="{this.rfDataSource}">
							<components:DistrictPanel infoData="{renfangRepeater.currentItem}"  checkFlag="true"/>
						</mx:Repeater>
					</mx:VBox>
				</mx:Canvas>
			</mx:VBox>
		</mx:VBox>
	</s:VGroup>
</framework:BaseWidget>
