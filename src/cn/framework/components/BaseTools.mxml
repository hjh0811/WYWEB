<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="group1_creationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import com.esri.ags.Map;
			import com.esri.ags.layers.Layer;
			
			import mx.collections.ArrayCollection;
			import mx.collections.ArrayList;
			import mx.events.FlexEvent;

			[Bindable]
			private var _map:Map
			
			public function set map(value:Map):void
			{
				this._map = value;
				_map.addEventListener(MouseEvent.CLICK,baseClickHandler);
			}
			
			private function baseClickHandler(event:MouseEvent):void
			{
				base.visible = false;
				base.includeInLayout =false;
			}
			
			private function initBasemapList():void
			{

			}
			
			
			protected function img_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				setBaseVisible();
			}
			
			private function setBaseVisible():void
			{
				if(base.visible == true)
				{
					base.visible = false;
					base.includeInLayout =false;
				}
				else
				{
					base.visible =true;
					base.includeInLayout=true;
				}
			}
			

			private var selectedDrawingIcon:Image;
			protected function clickHandler(event:MouseEvent,index:int):void
			{
				var image:Image = event.currentTarget as Image;
				img.source = image.source;
				
				selectedDrawingIcon = Image(event.currentTarget);
				clearSelectionFilter();
				selectedDrawingIcon.filters = [ glowFilter ];
				
				setBaseVisible();
				if(index==0)
				{
					var layer:Layer = this._map.getLayer("dt");
					if(layer!=null) layer.visible=true;
					var yxlayer:Layer = this._map.getLayer("yx");
					if(yxlayer!=null) yxlayer.visible=false;
					var zjlayer:Layer = this._map.getLayer("zj");
					if(zjlayer!=null) zjlayer.visible=false;
//					this._map.layers[0].visible = true;
//					this._map.layers[1].visible = false;
//					this._map.layers[2].visible = false;
//					this._map.layers[3].visible = false;
				}
				else if(index == 1)
				{
					var layer2:Layer = this._map.getLayer("dt");
					if(layer2!=null) layer2.visible=false;
					var yxlayer2:Layer = this._map.getLayer("yx");
					if(yxlayer2!=null) yxlayer2.visible=true;
					var zjlayer2:Layer = this._map.getLayer("zj");
					if(zjlayer2!=null) zjlayer2.visible=true;
//					this._map.layers[0].visible = false;
//					this._map.layers[1].visible = true;
//					this._map.layers[2].visible = true;
//					this._map.layers[3].visible = false;
				}
//				else if(index == 2)
//				{
//					this._map.layers[0].visible = false;
//					this._map.layers[1].visible = false;
//					this._map.layers[2].visible = false;
//					this._map.layers[3].visible = true;
//				}
			}
			
			
			private function clearSelectionFilter():void
			{
				for (var i:int = 0; i < base.numChildren; i++)
				{
					if (base.getChildAt(i).filters && base.getChildAt(i).filters.length > 0)
					{
						if (!(selectedDrawingIcon && base.getChildAt(i) === selectedDrawingIcon))
						{
							base.getChildAt(i).filters = [];
						}
					}
				}
			}


			protected function group1_creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				initBasemapList();
			}

		]]>
	</fx:Script>
	<fx:Declarations>
		<s:GlowFilter id="glowFilter"
					  alpha="1"
					  color="{getStyle('focusColor')}"
					  inner="false"
					  strength="3"/>
	</fx:Declarations>
	<s:HGroup>
		<s:HGroup id="base" gap="0" visible="false" includeInLayout="false">
			<s:Image  source="assets/images/dt.png" click="clickHandler(event,0)"/>
			<s:Image  source="assets/images/yx.png" click="clickHandler(event,1)"/>
			<!--<s:Image  source="assets/images/ght.png" click="clickHandler(event,2)"/>
			<s:Image  source="assets/images/xzt.png" click="clickHandler(event,3)"/>
			
			<s:Image  source="assets/images/sw.png" click="clickHandler(event,5)"/>-->
		</s:HGroup>
		<s:Image id="img" source="assets/images/dt.png" click="img_clickHandler(event)"/>
	</s:HGroup>
</s:Group>
